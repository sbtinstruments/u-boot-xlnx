/* SPDX-License-Identifier: GPL-2.0-or-later */
/*
 *	Copyright (C) 2019 Frederik Peter Aalund <fpa@sbtinstruments.com>
 */
/dts-v1/;
#include "zynq-green-mango.dtsi"

/ {
	model = "SBT Instruments Zeus";
	compatible = "sbt,green-mango-zeus",
	             "sbt,green-mango",
	             "xlnx,zynq-7000";
};

&i2c0 {
	battery0: max17205@36 {
		compatible = "maxim,max17205";
		reg = <0x36>;
	};
};

&amba {
	adc_qspi: axi_quad_spi@41e10000 {
		tia_adc: ltc2145@0 {
			clock-phase-delay = <45>;
			invert-clock;
			output-mode = "ddr-lvds";
			// internal-termination;
			// test-pattern = "alternating";
			// power-control = "channel2-nap";
			// alternate-bit-polarity;
		};
	};

	dac_qspi: axi_quad_spi@41e00000 {
		tia_dac: ad9704@0 {
			diff-clock-input;
		};
	};

	display: mipi-dbi-type-b@43C10000 {
		compatible = "urt,p220md-t";
		reg = <0x43C10000 0x10000>;
		reg-names = "mipi-dbi-type-b";
		// Backlight has been removed from this node since the display turns
		// it off during init. We want the splash screen to linger.
		// backlight = <&backlight>;
		// Init is done by u-boot. Additionally, this allows the splash screen
		// to linger until the UI is loaded.
		skip-panel-init;
	};

	gpio-keys {
		compatible = "gpio-keys";
		autorepeat;

		left {
			label = "left";
			gpios = <&gpio0 62 GPIO_ACTIVE_LOW>;
			linux,code = <105>;
		};
		ok {
			label = "ok";
			gpios = <&gpio0 54 GPIO_ACTIVE_LOW>;
			linux,code = <28>; // enter
		};
		up {
			label = "up";
			gpios = <&gpio0 55 GPIO_ACTIVE_LOW>;
			linux,code = <103>;
		};
		right {
			label = "right";
			gpios = <&gpio0 56 GPIO_ACTIVE_LOW>;
			linux,code = <106>;
		};
		down {
			label = "down";
			gpios = <&gpio0 57 GPIO_ACTIVE_LOW>;
			linux,code = <108>;
		};
		swab1 {
			label = "swab1";
			gpios = <&gpio0 58 GPIO_ACTIVE_LOW>;
			linux,code = <2>; // 1
		};
		swab2 {
			label = "swab2";
			gpios = <&gpio0 59 GPIO_ACTIVE_LOW>;
			linux,code = <3>; // 2
			/* TODO: Use the correct input type (i.e., switch and not key). We
			 * don't do this right now, since it is easier to test for key
			 * events in the current distro. */
			// linux,input-type = <EV_SW>;
		};
	};
};
